<div class="dashboard-header-bar d-flex justify-content-between align-items-center mb-3">
  <h2 class="fw-bold mb-0">Dashboard</h2>
  <a href="/tasks/add" class="btn btn-primary dashboard-addtask-btn">
    <i class="bi bi-plus-lg me-1"></i>Add Task
  </a>
</div>

<!-- Task Summary Cards -->
<div class="row mb-3 g-3">
  <div class="col-6 col-md-3">
    <div class="card small rounded-4 text-center shadow-sm">
      <div class="card-body">
        <div class="mb-1 text-muted small">Today's Tasks</div>
        <div class="fs-3 fw-bold text-primary"><%= todayCount || 0 %></div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card small rounded-4 text-center shadow-sm">
      <div class="card-body">
        <div class="mb-1 text-muted small">Upcoming Tasks</div>
        <div class="fs-3 fw-bold text-info"><%= upcomingCount || 0 %></div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card small rounded-4 text-center shadow-sm">
      <div class="card-body">
        <div class="mb-1 text-muted small">Pending Tasks</div>
        <div class="fs-3 fw-bold text-danger"><%= pendingCount || 0 %></div>
      </div>
    </div>
  </div>
  <div class="col-6 col-md-3">
    <div class="card small rounded-4 text-center shadow-sm">
      <div class="card-body">
        <div class="mb-1 text-muted small">Completed Tasks</div>
        <div class="fs-3 fw-bold text-success"><%= completedCount || 0 %></div>
      </div>
    </div>
  </div>
</div>

<!-- Filter Tab Bar -->
<div class="task-tabs mb-4 d-flex gap-1">
  <button class="btn btn-light tab-btn <%= activeFilter === 'all' ? 'active' : '' %>" data-filter="all">All Tasks</button>
  <button class="btn btn-light tab-btn <%= activeFilter === 'today' ? 'active' : '' %>" data-filter="today">Today's</button>
  <button class="btn btn-light tab-btn <%= activeFilter === 'upcoming' ? 'active' : '' %>" data-filter="upcoming">Upcoming</button>
  <button class="btn btn-light tab-btn <%= activeFilter === 'pending' ? 'active' : '' %>" data-filter="pending">Pending</button>
  <button class="btn btn-light tab-btn <%= activeFilter === 'completed' ? 'active' : '' %>" data-filter="completed">Completed</button>
</div>



<div class="row g-4">
  <!-- Tasks Table Section -->
  <div class="col-lg-8">
    <div class="card dashboard-tasklist rounded-4 shadow-sm fade-in" id="tasks-container">
      <%- include('partials/tasksList', { tasks, filter: activeFilter }) %>
    </div>
  </div>

  <!-- Profile and Activity Log Side Section -->
  <div class="col-lg-4">
    <div class="card rounded-4 shadow-sm mb-4 dashboard-profile-card">
      <div class="card-body text-center py-4">
        <img src="/public/images/avatar.svg" class="dashboard-avatar mb-3" alt="Avatar">
        <h6 class="mb-0 fw-semibold text-primary"><%= userName || 'User' %></h6>
        <div class="text-muted small mb-1">user@email.com</div>
        <div class="text-muted small">Task Warrior</div>
      </div>
    </div>
    <div class="card rounded-4 shadow-sm dashboard-activity-card">
      <div class="card-body py-4">
        <h6 class="fw-bold mb-3">Activity Log</h6>
        <ul class="list-group list-group-flush activity-log-list">
          <li class="list-group-item text-muted small">No recent activity</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<style>
  .tab-btn.active {
    border: 2px solid #0d6efd;
    background: #eaf1ff !important;
    color: #0d6efd;
    font-weight: 600;
  }
  .dashboard-tasklist { min-height:150px; }
  .fade-in { animation: fadeIn 0.4s;}
  @keyframes fadeIn { from {opacity: 0;} to {opacity:1;} }
  .task-completed { text-decoration: line-through; color: #198754; }
</style>

<script src="/public/js/dashboard.js"></script>

